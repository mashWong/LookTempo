import{_ as t,c as d,a,o as i}from"./index-Y0zsbkde.js";const c={ref:"videoPlayer",controls:""},h=t({data:()=>({mediaSource:null,sourceBuffer:null}),created(){window.fingerprint!=="c54b110c319d17b9859e89c20d47889c"&&this.$router.push("/")},mounted(){this.initMediaSource()},methods:{async initMediaSource(){const e=this.$refs.videoPlayer;"MediaSource"in window&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.640028"')&&(this.mediaSource=new MediaSource,e.src=URL.createObjectURL(this.mediaSource),this.mediaSource.addEventListener("sourceopen",this.onSourceOpen))},onSourceOpen(){this.sourceBuffer=this.mediaSource.addSourceBuffer('video/mp4; codecs="avc1.640028"'),this.fetchAndAppendData()},async fetchAndAppendData(){try{const e=await fetch("/api/video/stream"),r=await e.arrayBuffer();this.sourceBuffer.appendBuffer(r),this.sourceBuffer.addEventListener("updateend",()=>{this.sourceBuffer.updating||this.sourceBuffer.buffered.end(0)!==r.byteLength||(this.sourceBuffer.endOfStream(),this.mediaSource.endOfStream())})}catch{}}}},[["render",function(e,r,o,s,u,n){return i(),d("div",null,[a("video",c,null,512)])}],["__scopeId","data-v-90d966d6"]]);export{h as default};
